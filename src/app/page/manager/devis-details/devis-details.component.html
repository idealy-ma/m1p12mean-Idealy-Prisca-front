<div class="devis-details-container">
  <div class="header">
    <button class="btn-back" (click)="goBack()">
      <i class="fas fa-arrow-left"></i> Retour à la liste
    </button>
    <h1 class="page-title">Détails du devis</h1>
  </div>

  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <div *ngIf="error" class="alert-error">
    {{ error }}
  </div>

  <div *ngIf="!loading && devis" class="devis-content">
    <div class="content-grid">
      <!-- Informations générales -->
      <div class="section">
        <h2>Informations générales</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Statut</label>
            <span class="badge" 
                  [ngClass]="{
                    'badge-warning': devis.status === 'en_attente',
                    'badge-success': devis.status === 'accepte',
                    'badge-danger': devis.status === 'refuse'
                  }">
              {{ devis.status === 'en_attente' ? 'En attente' : 
                 devis.status === 'accepte' ? 'Accepté' : 
                 devis.status === 'refuse' ? 'Refusé' : devis.status }}
            </span>
          </div>
          <div class="info-item">
            <label>Date de création</label>
            <span>{{ devis.dateCreation | date:'dd/MM/yyyy' }}</span>
          </div>
          <div class="info-item">
            <label>Montant estimé</label>
            <span>{{ devis.montantEstime | currency:'EUR':'symbol':'1.2-2' }}</span>
          </div>
        </div>
      </div>

      <!-- Informations client -->
      <div class="section">
        <h2>Informations client</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Nom</label>
            <span>{{ devis.client?.nom }}</span>
          </div>
          <div class="info-item">
            <label>Prénom</label>
            <span>{{ devis.client?.prenom }}</span>
          </div>
          <div class="info-item">
            <label>Email</label>
            <span>{{ devis.client?.email }}</span>
          </div>
          <div class="info-item" *ngIf="devis.client?.telephone">
            <label>Téléphone</label>
            <span>{{ devis.client?.telephone }}</span>
          </div>
        </div>
      </div>

      <!-- Informations véhicule -->
      <div class="section">
        <h2>Informations véhicule</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Marque</label>
            <span>{{ devis.vehicule?.marque }}</span>
          </div>
          <div class="info-item">
            <label>Modèle</label>
            <span>{{ devis.vehicule?.modele }}</span>
          </div>
          <div class="info-item">
            <label>Immatriculation</label>
            <span>{{ devis.vehicule?.immatricule }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Description -->
    <div class="section description-section">
      <h2>Description de la demande</h2>
      <div class="description">
        {{ devis.description }}
      </div>
    </div>

    <!-- Actions -->
    <div class="section actions-section" *ngIf="devis.status === 'en_attente'">
      <h2>Actions</h2>
      <div class="actions">
        <button class="btn-success" (click)="updateStatus('accepte')">
          <i class="fas fa-check"></i> Accepter le devis
        </button>
        <button class="btn-danger" (click)="updateStatus('refuse')">
          <i class="fas fa-times"></i> Refuser le devis
        </button>
      </div>
    </div>
  </div>
</div> 